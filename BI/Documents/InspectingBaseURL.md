## BSURL 테이블의 SELL_END_YN의 신뢰성 검토

### 1. 하나의 Base URL에는 여러 개의 ITEM이 매칭될 수 있다.  
* 묶음 상품의 경우가 그렇다. 이때 다른 ITEM_NUM이라도 URL이 같기 때문에 한꺼번에 크롤된다(REG_DT 확인 완료)
* join할 때 key는 ITEM_NUM. 하지만 하나의 ITEM_NUM만이 매칭된다. 나머지에는 매칭되는 BS_URL이 테이블에 존재하지 않는다.
* 이런 케이스의 수는 GSSHOP의 경우는 약 0.26%
* COLLECT_URL로 BS_URL이 같은 경우를 찾을 수는 있으나 indexing이 되어있지 않아 오래 걸린다.

### 2. 이 검토는 Hive의 데이터를 이용하였다.
* Hive의 데이터는 2018년 1월 1일부터 시작. (reg_dt, collect_day 모두)

### 3. SELL_EN_YN이 0인 데이터에 대해 (GSSHOP 10월 11일 현재 기준)
* 총 5,967,737개 ITEM 중 2,819,662개.
* 9월 1일 이후에 크롤된 적 없는 데이터가 181,413 (6.43%)
* 10월 1일 기준으로는 1,205,492 (42.75%)
* 8월 1일 기준으로는 144,929 (5.14%)
* 상당수의 아이템이 크롤 중단되었다고 마킹되어야 한다.

### 4. SELL_EN_YN이 1인 데이터에 대해 (GSSHOP 10월 11일 현재 기준)
* 총 5,967,737개 ITEM 중 3,132,418개.
* 9월 1일 이후에 크롤된 데이터가 328,301 (10.48%)
* 10월 1일 기준으로는 10,069 (0.32%)
* 8월 1일 기준으로는 711,292 (22.71%)
* 상당수의 아이템이 크롤 중단되었다고 마킹되어야 한다.
* 2018년 10월 15일 현재 HMALL 대상으로 검증 중
  * SELL_END_YN이 1인 3,318,810개 ITEM 중 Hive에 있는 1,942,082개의 ITEM
  * 한 주간 매일매일 위의 아이템 중 inventory_part에 업데이트 된 것이 있는지 확인

### 결론
* SELL_EN_YN이 0이라고 해서 크롤 중이라고 믿을 수는 없다
* 판단하는 다른 기준이 필요하지만 일단 최근 언제까지 크롤됐나를 보자.
* SELL_EN_YN이 1인 데이터는 크롤이 끝났다고 가정하자.

